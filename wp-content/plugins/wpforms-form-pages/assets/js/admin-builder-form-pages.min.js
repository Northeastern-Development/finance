"use strict";var WPFormsBuilderFormPages=window.WPFormsBuilderFormPages||function(e,t,o){var n={toggleSettingsCheckbox:o("#wpforms-panel-field-settings-form_pages_enable"),previewFormBtn:o("#wpforms-form-pages-preview-form-page"),slug:{textField:o("#wpforms-panel-field-settings-form_pages_page_slug"),editBtn:o(".wpforms-form-pages-page-slug-edit"),viewBtn:o(".wpforms-form-pages-page-slug-view"),cancelBtn:o(".wpforms-form-pages-page-slug-cancel")},logo:{previewContainer:o(".wpforms-form-pages-custom-logo-container"),textField:o("#wpforms-panel-field-settings-form_pages_custom_logo"),addBtn:o(".wpforms-form-pages-custom-logo-upload"),deleleBtn:o(".wpforms-form-pages-custom-logo-delete")}},i={init:function(){o(e).ready(i.ready)},ready:function(){i.conditionals(),i.events(),i.actions()},conditionals:function(){void 0!==o.fn.conditions&&n.toggleSettingsCheckbox.conditions({conditions:{element:"#wpforms-panel-field-settings-form_pages_enable",type:"checked",operator:"is"},actions:{if:{element:"#wpforms-form-pages-content-block,#wpforms-form-pages-preview-form-page",action:"show"},else:{element:"#wpforms-form-pages-content-block,#wpforms-form-pages-preview-form-page",action:"hide"}},effect:"appear"})},events:function(){i.generalEvents(),i.colorPickerEvents(),i.customLogoEvents(),i.formSlugEvents()},actions:function(){i.prefillPageTitle()},generalEvents:function(){n.toggleSettingsCheckbox.click(function(e){i.toggleSettingsPanel(e)})},colorPickerEvents:function(){o("#wpforms-panel-field-settings-form_pages_color_scheme-7").minicolors({show:function(){o(this).prop("checked",!0)}})},customLogoEvents:function(){n.logo.addBtn.click(function(e){e.preventDefault(),i.openMediaFrame()}),n.logo.deleleBtn.click(function(e){e.preventDefault(),i.deleteCustomLogo()})},formSlugEvents:function(){n.previewFormBtn.click(function(e){i.previewForm(e)}),n.slug.viewBtn.click(function(e){i.previewForm(e)}),o("#wpforms-builder").on("wpformsSaved",function(e,o){i.updateFormSlugUI(o)})},toggleSettingsPanel:function(e){n.toggleSettingsCheckbox.is(":checked")&&o("#wpforms-panel-field-settings-conversational_forms_enable").is(":checked")&&(e.preventDefault(),o.confirm({title:!1,content:wpforms_admin_builder_form_pages.i18n.enable_prevent_modal,closeIcon:!1,icon:"fa fa-exclamation-circle",type:"orange",buttons:{cancel:{text:wpforms_admin_builder_form_pages.i18n.enable_prevent_modal_ok}}}))},previewForm:function(e){if(WPFormsBuilder.formIsSaved())t.open(e.target.href,"_blank");else{var o=t.open("","_blank");e.preventDefault(),WPFormsBuilder.formSave().done(function(){o.location=e.target.href})}},initMediaFrame:function(){var e,o={title:wpforms_admin_builder_form_pages.i18n.logo_selection_frame_title,button:{text:wpforms_admin_builder_form_pages.i18n.logo_selection_frame_button_text},library:{type:"image"},multiple:!1};return(e=wp.media(o)).on("select",function(){i.selectCustomLogo(e)}),e},openMediaFrame:function(){(void 0===wp.media.frame?i.initMediaFrame():wp.media.frame).open()},selectCustomLogo:function(e){var o=e.state().get("selection").first().toJSON(),t=o.url;void 0!==o.sizes.medium&&(t=o.sizes.medium.url),n.logo.deleleBtn.find("img").remove(),n.logo.deleleBtn.append('<img src="'+t+'" alt="'+wpforms_admin_builder_form_pages.i18n.logo_preview_alt+'"/>'),n.logo.previewContainer.show(),n.logo.textField.val(o.id),n.logo.deleleBtn.show()},deleteCustomLogo:function(){n.logo.previewContainer.find("img").remove(),n.logo.addBtn.show(),n.logo.previewContainer.hide(),n.logo.textField.val("")},updateFormSlugUI:function(e){void 0!==e.form_pages&&(n.slug.textField.val(e.form_pages.slug),n.slug.viewBtn.prop("href",e.form_pages.url),n.previewFormBtn.prop("href",e.form_pages.url))},prefillPageTitle:function(){var e;wpf.getQueryString("newform")&&((e=o("#wpforms-panel-field-settings-form_pages_title")).val()||e.val(o("#wpforms-panel-field-settings-form_title").val()))}};return i}(document,window,jQuery);WPFormsBuilderFormPages.init();